<main>

    <a href="/">
        <p>Inicio</p>
    </a>
    
    <div class="gestion-rol">
        <h2>Gestión de Roles</h2>


        <hr />
        <h3>Buscar usuario por número de hermano</h3>

        <input type="text" [(ngModel)]="idHermanoBusqueda" placeholder="Número de hermano" />
        <button (click)="buscarUsuarioPorIdHermano()">Buscar</button>

        <div *ngIf="usuarioEncontrado">
            <p><strong>Nombre:</strong> {{ usuarioEncontrado.nombreUsuario }}</p>
            <p><strong>Email:</strong> {{ usuarioEncontrado.email }}</p>
            <p><strong>Número de Hermano:</strong> {{ usuarioEncontrado.idHermano }}</p>
          
            <label for="rolSelect">Rol asignado:</label>
            <select
              id="rolSelect"
              [(ngModel)]="usuarioEncontrado.idRol"
              (change)="actualizarRolUsuario(usuarioEncontrado.idRol!)"
            >
              <option [ngValue]="undefined" disabled selected>Selecciona un rol</option>
              <option *ngFor="let rol of roles" [ngValue]="rol.id">{{ rol.nombreRol }}</option>
            </select>
          </div>
          


        <button (click)="mostrarInput = !mostrarInput">
            {{ mostrarInput ? 'Cancelar' : 'Crear nuevo rol' }}
        </button>

        <div *ngIf="mostrarInput">
            <input [(ngModel)]="nuevoRol" placeholder="Nombre del rol" />
            <button (click)="crearRol()">Guardar</button>
        </div>

        <p *ngIf="exito" style="color: green;">{{ exito }}</p>
        <p *ngIf="error" style="color: red;">{{ error }}</p>

        <ul>
            <li *ngFor="let rol of roles">
                {{ rol.nombreRol }}
                <button (click)="eliminarRol(rol.id)">Eliminar</button>
            </li>
        </ul>
    </div>

</main>